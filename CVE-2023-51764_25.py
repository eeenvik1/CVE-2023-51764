import telnetlib
import base64

# SMTP server details
smtp_server = 'smtp.server.com'
smtp_port = 25

# Sender and recipient details
from_address = 'user@google.com'
to_address = 'user@google.com'

# Authentication details
username = 'login'
password = 'password'

# Email message details
subject = 'Message # 1'
body = '''\
Message # 1
\r.\r
mail FROM:<admin@google.com>
rcpt TO:<user@google.com>
data

Hello sweet baby Im your Santa
'''

# Connect to the SMTP server
tn = telnetlib.Telnet(smtp_server, smtp_port)

# Send the email commands
print(tn.read_until(b'220').decode())
tn.write(b'HELO smtp.server.com\r\n')  # smtp_server
print(tn.read_until(b'250').decode())
tn.write(b'AUTH LOGIN\r\n')
print(tn.read_until(b'334').decode())
tn.write(base64.b64encode(username.encode()) + b'\r\n')
print(tn.read_until(b'334').decode())
tn.write(base64.b64encode(password.encode()) + b'\r\n')
print(tn.read_until(b'235').decode())
tn.write(b'MAIL FROM:<' + from_address.encode() + b'>\r\n')
print(tn.read_until(b'250').decode())
tn.write(b'RCPT TO:<' + to_address.encode() + b'>\r\n')
print(tn.read_until(b'250').decode())
tn.write(b'DATA\r\n')
print(tn.read_until(b'354').decode())
tn.write(b'Subject: ' + subject.encode() + b'\r\n')
tn.write(b'\r\n')
tn.write(body.encode() + b'\r\n')
tn.write(b'\r\n.\r\n')
print(tn.read_until(b'250').decode())
tn.write(b'QUIT\r\n')
print(tn.read_until(b'221').decode())

# Close the connection
tn.close()
